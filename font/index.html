<!doctype html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- 上述3个meta标签*必须*放在最前面，任何其他内容都*必须*跟随其后！ -->
    <title>Omega</title>
    <!-- Bootstrap -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css"
          integrity="sha384-HSMxcRTRxnN+Bdg0JdbxYKrThecOKuH5zCYotlSAcp1+c8xmyTe9GYg1l9a69psu" crossorigin="anonymous">
    <link href="theme.css" rel="stylesheet">
    <!-- HTML5 shim 和 Respond.js 是为了让 IE8 支持 HTML5 元素和媒体查询（media queries）功能 -->
    <!-- 警告：通过 file:// 协议（就是直接将 html 页面拖拽到浏览器中）访问页面时 Respond.js 不起作用 -->
    <!--[if lt IE 9]>
    <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
    <![endif]-->
</head>
<body>
<!-- jQuery (Bootstrap 的所有 JavaScript 插件都依赖 jQuery，所以必须放在前边) -->
<script src="https://cdn.jsdelivr.net/npm/jquery@1.12.4/dist/jquery.min.js"
        integrity="sha384-nvAa0+6Qg9clwYCGGPpDQLVpLNn0fRaROjHqs13t4Ggj3Ez50XnGQqc/r8MhnRDZ"
        crossorigin="anonymous"></script>
<!-- 加载 Bootstrap 的所有 JavaScript 插件。你也可以根据需要只加载单个插件。 -->
<script src="https://stackpath.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"
        integrity="sha384-aJ21OjlMXNL5UyIl/XNwTMqvzeRMZH2w8c5cRVpzpU8Y5bApTppSuUkhZXN0VxHd"
        crossorigin="anonymous"></script>


<!-- Fixed navbar -->
<nav class="navbar navbar-default navbar-fixed-top">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar"
                    aria-expanded="false" aria-controls="navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
       </div>
        <!--        voyage star collect upload order-->
        <div id="myTab" class="navbar-collapse collapse">

            <ul id="navbar-left" class="nav navbar-nav">
                <li class="active"><a href="#Planet">Omega</a></li>
                <li><a href="#upload">upload </a></li>

                <li><a href="#watch">watch </a></li>
            </ul>
            <script>
                $(function () {
                    $('#myTab a:first').tab('show');
                })
                $('#myTab a').click(function (e) {
                    e.preventDefault();
                    $(this).tab('show');
                })
            </script>
        </div><!--/.nav-collapse -->
    </div> <!--/end of container-->
</nav>


<br><br><br><br>

<div class="tab-content">
    <div class="tab-pane active" id="Planet">
        <div class="container theme-showcase" role="main">
            <!-- Main jumbotron for a primary marketing message or call to action -->
            <div class="jumbotron">
                <h1>Omega</h1>
                <p> 最懂你的流媒体平台</p>
                <img src="https://algotest123.oss-cn-beijing.aliyuncs.com/test/fdc4a48708fea2de233cfdcc02e822b93085a26c"
                     width="1010px" height="300px">
            </div>
        </div>
    </div>
    <div class="tab-pane" id="upload">
        <div class="container">
            <div class="page-header">
                <h1 class="text-center">upload</h1>
            </div>

            <div id="upload-video" style="text-align: center">
                <input id="upload-video-input" class="hide" type="file" required onchange="upload_video()">
                <button id="upload-video-button" class="video-button" type="button" value="upload-video"
                        onclick="document.getElementById('upload-video-input').click();" witdh="1920px" height="1080px">
                    <div id="upload-video-button-text">
                        <h4>点击上传视频</h4>
                        <h5> 我们真诚地建议您上传1080p的视频 :)</h5>
                    </div>

                </button>
                <style type="text/css">
                    #upload-video-button-img-inside {
                        display: inline-block;
                        position: relative;
                        background: #ccc;
                        vertical-align: top;
                    }

                    /*input{outline:none}*/
                    #upload-video-button {
                        background-color: #f8f9fa; /* Green */
                        border: none;
                        /*color: white;*/
                        /*padding: 15px 32px;*/
                        width: 480px;
                        height: 270px;
                        text-align: center;
                        text-decoration: none;
                        /*outline-color: #0f0f0f;*/
                        /*outline-style: dot-dot-dash;*/
                        /*display: inline-block;*/
                        /*font-size: 16px;*/
                    }
                </style>
                <script>
                    function upload_video() {
                        document.getElementById("upload-video-button-text").innerHTML = "<h2> 视频已加载到前端</h2>";
                    }
                </script>
            </div>

            <div style="position: absolute;left: 50%;width:400px;margin-left:-200px;">


                <br>
                <form class="bs-example bs-example-form" role="form">
                    <div class="input-group ">
                        <span class="input-group-addon">视频名称</span>
                        <input id="upload-amount" type="text" class="form-control"
                               placeholder="maybexxx.mp4">
                    </div>
                    <br>
                </form>

                <button id="upload-NFT-button-first" onclick="upload()" type="button" class="btn  btn-info"
                        style="display:block;margin:0 auto">&nbsp;&nbsp;&nbsp;上传至后端 &nbsp;&nbsp;&nbsp;
                </button>

                <div id="upload-first-code">

                </div>
                <script>
                    function upload() {
                        var formData = new FormData();
                        let video = document.getElementById("upload-video-input").files[0];
                        let name = document.getElementById("upload-amount").value;
                        formData.append("video", video);
                        formData.append("name", name);
                        // console.log(video);
                        // console.log(name);
                        // console.log(formData);

                        $.ajax
                        ({
                            url: "http://127.0.0.1:3001/up",
                            dataType: 'json',
                            type: 'POST',
                            async: true,
                            timeout: 0, // first
                            data: {name:name},
                            cache: false,
                            processData: false, // 使数据不做处理
                            contentType: false, // 不要设置Content-Type请求头
                            success: function (data) {
                                alert("success" + JSON.stringify(data, 0, 2));
                            },
                            error: function (data) {
                                //上传失败要报错
                                alert(": ( 上传失败要报错\r\n" + JSON.stringify(data, 0, 2))
                            }
                        });
                    }

                </script>
                <br><br><br><br><br><br>

            </div>

        </div>


    </div> <!--end of upload-->
    <div class="tab-pane" id="watch">
        <div class="container text-center">
            <div class="page-header">
                <h1 class="text-center">watch</h1>
            </div>

            <div style="position: absolute;left: 50%;width:400px;margin-left:-200px;">

                <form class="bs-example bs-example-form" role="form">
                    <div class="input-group">
                        <span class="input-group-addon">&nbsp;&nbsp;&nbsp;视频搜索&nbsp;&nbsp;&nbsp;</span>
                        <input id="userName" type="text" class="form-control" placeholder="请输入视频名称,例如maybe.mp4">
                    </div>

                </form>


            </div>

            <br>
            <br>
            <br>


            <div class="btn-group" style="position: absolute;left: 50%;width:400px;margin-left:-200px;">
                <button type="button" class="btn btn-default" onclick="getvideo(1)" >&nbsp;&nbsp;&nbsp;&nbsp;360p&nbsp;&nbsp;&nbsp;&nbsp;
                </button>
                <button type="button" class="btn btn-default" onclick="getvideo(2)">&nbsp;&nbsp;&nbsp;&nbsp;720p&nbsp;&nbsp;&nbsp;&nbsp;
                </button>
                <button type="button" class="btn btn-default" onclick="getvideo(3)" >&nbsp;&nbsp;&nbsp;1080p&nbsp;&nbsp;&nbsp;</button>

            </div>
            <div>

                <br>
                <br>
                <br>
                <br>
                <br>
                <br>
                <div id="ohvideo">

                </div>

                <script>
                    function getvideo(mark){

                        let name=document.getElementById("userName").value;
                        let url="";
                        if(mark==1) url="360p/";
                        else if(mark==2) url="720p/";
                        else if(mark==3) url="1080p/";
                        let _="http://127.0.0.1:9000/"+url+name;

                        console.log(_);

                        let content="    <video id=\"video\" src= \""+ _
                        +"\" width=\"960px\" height=\"540px\" controls=\"controls\">\n" +
                            "                    视频不见了\n" +
                            "\n" +
                            "            </video>";
                        console.log(content);
                        document.getElementById("ohvideo").innerHTML=content;
                    }
                </script>
            </div>
        </div>
        <br><br><br><br><br><br><br><br>
    </div>
</div>


</body>
</html>
